<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>Moviera | Aykut Simsek</title>
		<link rel="shortcut icon" href="/static/img/logo/favicon.ico">
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="//cdn.jsdelivr.net/g/bootstrap@3.3.5(css/bootstrap.min.css),jquery.nouislider@8.1.0(nouislider.min.css)">
		<link rel="stylesheet" href="/static/projects/moviera/css/moviera.css">
		
		
		<script src="//cdn.jsdelivr.net/g/jquery@3.0.0-alpha1,list.js@1.1.1,d3js@3.5.6,jquery.unveiljs@1.3.0,jquery.nouislider@8.1.0"  charset="utf-8"></script>
		<script src="//listjs.com/no-cdn/list.pagination.js"></script>
		<script src='/static/projects/moviera/js/app.js'></script>
		
		<script>
  			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-66787829-1', 'auto');
  			ga('send', 'pageview');
		</script>
	</head>
	<body id="list-panel">
		<div class="container col-md-3 control-panel">
			<div class="col-md-12 row text-center">
				<img height=64 src="/static/projects/moviera/img/moviera_logo.png"></img>
			</div>
			<div class="col-md-12 row control-half" style='padding:20px 0 0 0;'>
				<div class="col-md-3" style='line-height:2em;'>Genre:</div>
				<div class="col-md-9">
					<span class="custom-dropdown list-group-item-heading">
						<select>
							<option value='All'>All</option>
						</select>
					</span>
				</div>
			</div>	
			<div class="col-md-12 row control-half" style='padding:20px 0 0 0;'>
			  <div class="col-md-3" style='line-height:2em;'>Sort:</div>
			  <div class="col-md-9">
			  	<div class="switch-toggle">
					<input id="sort_metascore" name="view-d" type="radio" checked>
					<label for="sort_metascore" onclick="featureList.sort('m_metascore', { order: 'desc' });">Metascore</label>

					<input id="sort_air_date" name="view-d" type="radio">
					<label for="sort_air_date" onclick="featureList.sort('m_air_date', { order: 'desc' });">Date</label>
					<a></a>
				</div>
			  </div>
			</div>	
			<div class="col-md-12 row" style='padding:20px 0 0 0;'>
            	<div class='col-md-12'>
					<div id="date-slider"></div>
					<div style='padding-top:6px;'>
						<span class="date-val" id="event-start"></span>
						<span class="date-val" id="event-end" style='float: right;'></span>
					</div>
				</div>
			</div>
			<div class="col-md-12 row" style='padding:20px 0 0; 0;'>
				<div id="custom-search-input" class="col-md-12">
					<div style='display:flex'>
						<input type="text" class="search-query form-control search" placeholder="Search" />
						<span class="input-group-btn">
							<button class="btn" type="button" style='margin-top:6px;'>
								<i class="fa fa-search"></i>
							</button>
						</span>
					</div>
				</div>
            </div>
            <div class="col-md-12 row" style='padding:20px 0 20px; 0;'>
            	<ul class="pagination" style='min-height:40px;'></ul>
            </div>
		</div>
		<div class="container col-md-9 list-panel">
			<div class="row">
				<div id="cover" style='position:absolute;width:100%;text-align:center;margin-top:30%;'>
					<i class="fa fa-refresh fa-spin" style='font-size:100px;'></i></br>Loading...</div>
				</div>
				<ul id="list" class="list list-group">
				</ul>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		// Field Mapping from csv file
		var csv_file = '/static/projects/moviera/data/movies.csv'
		//var isMobile = navigator.userAgent.match(/Mobi/);
		var isMobile = false;
		
		featureList = null;
		filterList  = null;
		genre = null;
		
		months = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
		genres = ["Action","Adventure","Animation","Biography","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Music","Musical","Mystery","Romance","Sci-Fi","Sport","Thriller","War","Western"]
		
		start_date = dateVal(new Date(Date.parse('01/01/2011')));
		end_date   = dateVal(new Date());
		
		genres.forEach(function(g) {
			//$('.filter').append('<li class="btn">' + g + '</li>')
			$(".custom-dropdown select").append(
				"<option value='" + g + "'>" + g + "</option>"
			)
		})
		
		init_date_slider()
		
		
		$( document ).ready(function() {
			//init();
			d3.csv(csv_file, function(error, csv) {
				csv.forEach(function(c, i) {
					//if( i < 250) {
					//if(c.title == 'The Salt of the Earth (2014)'){
					//	console.log(c)
						$('#list').append(list_item_template(c))
					//}
				})
				$("figure img").unveil();
				init_list();
				$('#cover').fadeOut(2000);
				
				$(".custom-dropdown select").change(function(){
					genre = $(this).val();
					filterList(genre)
				})
				filterList('All',start_date,end_date);
				featureList.sort('m_metascore', { order: "desc" });	
			})
		})
	</script>
</html>