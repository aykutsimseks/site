<!-- http://codepen.io/jamesbarnett/pen/kcwzq -->
<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8' />
		<title>Moviera | Aykut Simsek</title>
		<link rel="shortcut icon" href="{{ STATIC_URL }}img/logo/favicon.ico">
		
		<link rel="stylesheet"  href='//cdn.jsdelivr.net/jquery.nouislider/8.0.2/nouislider.min.css'/>
		<link rel="stylesheet" href="{{ STATIC_URL }}projects/moviera/css/moviera.css" rel="stylesheet" type="text/css"/>
		
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"  charset="utf-8"></script>
		<script src="//listjs.com/no-cdn/list.js"></script>
		<script src="//listjs.com/no-cdn/list.pagination.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
		<script src="//cdn.jsdelivr.net/jquery.unveiljs/1.3.0/jquery.unveil.min.js"></script>
		<script src='//cdn.jsdelivr.net/jquery.nouislider/8.0.2/nouislider.min.js'></script>
		<script src="{{ STATIC_URL }}projects/moviera/js/app.js"></script>
		
		
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
		<script>
  			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-66787829-1', 'auto');
  			ga('send', 'pageview');
		</script>
	</head>
	<body>
		<div id="cover"><div style='position:fixed;top:40%;text-align:center;width:100%;font-weight:800;'><i class="fa fa-refresh fa-spin" style='font-size:100px;'></i></br>Loading...</div></div>
		<div id="container">
			<div class="example-page">
				<div id="main">
					<div class="c1">
						<div id="lovely-things-list" style='display:inline-block'>
							<div class="control-panel">
								<div class="title" style=''><img height=64 style='vertical-align:-3px;' src="{{STATIC_URL}}projects/moviera/img/moviera_logo.png"></img></a></div>
								<div class="control filter">
										<li class='control-head'>Genre:</li>
										<span class="custom-dropdown">
											<select>
												<option value='All'>All</option>
											</select>
										</span>
									</div>
								<ul  class="control sort-by">
									<li class='control-head'> Sort by:</li>
									<li class="btn highlight desc" data-sort="metascore"><i class="fa fa-sort-desc"></i>Metascore</li>
									<!-- <li class="btn desc" data-sort="name">Name</li> -->
									<li class="btn desc" data-sort="air_date">Air Date</li>
								</ul>
								<input class="search" placeholder="Search Title, Artist, Director or Plot..."></input>
								<div id='slider-container' class='col-12'>
									<div id="date-slider"></div>
									<div class='col-12'>
										<span class="date-val" id="event-start"></span>
										<span class="date-val" id="event-end" style='float: right;'></span>
									</div>
								</div>
								<ul class="control pagination"></ul>
								<div class="control attribution">
									&copy;2015&nbsp;<a href="http://aykutsimseks.com">Aykut Simsek</a> | Data from <a href='http://www.imdb.com' target='_blank'><img height=14  style='vertical-align:-3px;' src="{{STATIC_URL}}projects/moviera/img/imdb.png"></img></a> | Using <a href='http://www.listjs.com/' target='_blank'>List.js</a>
								</div>
							</div>
							<div class="list-panel">
								<ul class="list" id='list'></ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- end of #container -->
		<script type="text/javascript">
			// Field Mapping from csv file
			var csv_file = '{{STATIC_URL}}projects/moviera/data/movies.csv'
			
			//var isMobile = navigator.userAgent.match(/Mobi/);
			var isMobile = false
    		$( document ).ready(function() {
				init();
				d3.csv(csv_file, function(error, csv) {
					csv.forEach(function(c, i) {
						$('#list').append(
							[
								'<li>',
								'<a href=' + c.url + ' target="_blank"><img height="140" width="200" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"  data-src="'+ ((isMobile)?(''):('{{STATIC_URL}}projects/moviera/img/thumbnails/' + c.unique_id + '.png')) +  '" class="thumb" /></a>',
								'<a href=' + c.url + ' target="_blank"><h4><span class="name">' + c.title + '</span>' + ((c.netflix_url != '')?'<a title="Available on Netflix" href="'+ c.netflix_url +'"><img height=22 class="netflix-icon" src="{{STATIC_URL}}projects/moviera/img/netflix_red.png"></img></a>':'')+ '</h4></a>',
								'<p>' + ((c.metascore != '')?('Metascore: <span class="metascore">' + c.metascore + '</span> | '):'') + c.run_time + ' min | <span class="genres">' + eval(c.genres).join(', ') + '</span> | <span>' + (months[c.month-1]||'') + '</span>' + (months[c.month-1]?', ':'') +  '<span class="year">' + (c.year||'') + '</span></p></p>',
								'<span class="month" style="display:none;">' + (c.month||0) + '</span><span class="air_date" style="display:none;">' + (parseInt((c.month||0)) + parseInt((c.year||0))*12)+ '</span>',
								'<p><span class="description">' + c.description + '</span></p>',
								'<p> D: <span class="director">' + c.director + '</span> | S: <span class="stars">' + eval(c.stars).join(', ') + '</span></p>',
								'</li>'
							].join('')
						)	
					})
					
					$("img").unveil();
					init_list();
					$('#cover').fadeOut(500);		
				})
			})
		</script>
	</body>
</html>